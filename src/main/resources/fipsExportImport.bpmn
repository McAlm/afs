<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1wx81lp" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.9.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.1.0">
  <bpmn:process id="fips1-2-fips2" name="FIPS1-to-FIPS2" isExecutable="true">
    <bpmn:extensionElements>
      <zeebe:userTaskForm id="userTaskForm_01bnjns">{
  "components": [
    {
      "text": "# Dies ist eine Camunda Form",
      "type": "text",
      "id": "Field_14271k3"
    },
    {
      "label": "Mitarbeiter",
      "type": "textfield",
      "id": "Field_0sman4u",
      "key": "employeeName",
      "validate": {
        "required": true
      }
    },
    {
      "label": "Alte Zuständigkeit",
      "type": "textfield",
      "id": "Field_06reyio",
      "key": "alteZustaendigkeit",
      "validate": {
        "required": true
      },
      "appearance": {}
    },
    {
      "label": "Neue Zuständigkeit",
      "type": "textfield",
      "id": "Field_03don54",
      "key": "neueZustaendigkeit"
    },
    {
      "label": "Problem gelöst?",
      "type": "checkbox",
      "id": "Field_1dum0j0",
      "key": "problemSolved"
    }
  ],
  "type": "default",
  "id": "fipsProblemForm",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.9.0"
  },
  "schemaVersion": 7
}</zeebe:userTaskForm>
    </bpmn:extensionElements>
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>Flow_0ac0n3b</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0ac0n3b" sourceRef="StartEvent_1" targetRef="Activity_0guasy1" />
    <bpmn:dataObjectReference id="DataObjectReference_0bivd1e" name="CSV" dataObjectRef="DataObject_1pz5t99" />
    <bpmn:dataObject id="DataObject_1pz5t99" />
    <bpmn:endEvent id="Event_0ya2qbz">
      <bpmn:incoming>Flow_059pmfr</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_059pmfr" sourceRef="Activity_1qpiz4g" targetRef="Event_0ya2qbz" />
    <bpmn:serviceTask id="Activity_1qpiz4g" name="Importiere Daten nach FIPS 2" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateIcon="data:image/svg+xml;utf8,%3Csvg%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M17.0335%208.99997C17.0335%2013.4475%2013.4281%2017.0529%208.98065%2017.0529C4.53316%2017.0529%200.927765%2013.4475%200.927765%208.99997C0.927765%204.55248%204.53316%200.947083%208.98065%200.947083C13.4281%200.947083%2017.0335%204.55248%2017.0335%208.99997Z%22%20fill%3D%22%23505562%22%2F%3E%0A%3Cpath%20d%3D%22M4.93126%2014.1571L6.78106%203.71471H10.1375C11.1917%203.71471%2011.9824%203.98323%2012.5095%204.52027C13.0465%205.04736%2013.315%205.73358%2013.315%206.57892C13.315%207.44414%2013.0714%208.15522%2012.5841%208.71215C12.1067%209.25913%2011.4553%209.63705%2010.6298%209.8459L12.0619%2014.1571H10.3315L9.03364%2010.0249H7.24351L6.51254%2014.1571H4.93126ZM7.49711%208.59281H9.24248C9.99832%208.59281%2010.5901%208.42374%2011.0177%208.08561C11.4553%207.73753%2011.6741%207.26513%2011.6741%206.66842C11.6741%206.19106%2011.5249%205.81811%2011.2265%205.54959C10.9282%205.27113%2010.4558%205.1319%209.80936%205.1319H8.10874L7.49711%208.59281Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E%0A">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="post" target="method" />
          <zeebe:input source="https://f2b64db6-393e-4846-a68b-6100c632468a.mock.pstmn.io/importKommunaleProdukte" target="url" />
          <zeebe:input source="={zustaendigkeit:zustaendigkeit}" target="queryParameters" />
          <zeebe:input source="20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=json" target="body" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultVariable" value="importResponse" />
          <zeebe:header key="resultExpression" value="={success: response.body.importSuccessful}" />
          <zeebe:header key="errorExpression" value="=if error.code = &#34;501&#34; then&#10;  bpmnError(&#34;INVALID_DATA&#34;, &#34;Daten konnten nicht importiert werden!&#34;)&#10;else &#10;  null" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0yzgf2h</bpmn:incoming>
      <bpmn:outgoing>Flow_059pmfr</bpmn:outgoing>
      <bpmn:property id="Property_1ocbpda" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_1iytkrd">
        <bpmn:sourceRef>DataObjectReference_1661hqr</bpmn:sourceRef>
        <bpmn:targetRef>Property_1ocbpda</bpmn:targetRef>
      </bpmn:dataInputAssociation>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_1nt6eyv" name="Daten invalide" attachedToRef="Activity_1qpiz4g">
      <bpmn:extensionElements />
      <bpmn:outgoing>Flow_1g7fn8d</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_17ym0xy" errorRef="Error_10we5t0" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1g7fn8d" sourceRef="Event_1nt6eyv" targetRef="fipsProblemBeheben" />
    <bpmn:userTask id="fipsProblemBeheben" name="Problem beheben">
      <bpmn:extensionElements>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_01bnjns" />
        <zeebe:ioMapping>
          <zeebe:input source="=zustaendigkeit" target="alteZustaendigkeit" />
          <zeebe:output source="=neueZustaendigkeit" target="zustaendigkeit" />
          <zeebe:output source="=employeeName" target="employeeName" />
          <zeebe:output source="=alteZustaendigkeit" target="alteZustaendigkeit" />
          <zeebe:output source="={alteZustaendigkeit: alteZustaendigkeit, &#10;employeeName: employeeName,&#10;zustaendigkeit: zustaendigkeit}" target="errorLogValue" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1g7fn8d</bpmn:incoming>
      <bpmn:outgoing>Flow_1htmiu8</bpmn:outgoing>
      <bpmn:property id="Property_188bsgx" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_18igujp">
        <bpmn:sourceRef>DataObjectReference_1661hqr</bpmn:sourceRef>
        <bpmn:targetRef>Property_188bsgx</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0qobqu9">
        <bpmn:targetRef>DataObjectReference_1661hqr</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1htmiu8" sourceRef="fipsProblemBeheben" targetRef="Activity_0772nyf" />
    <bpmn:businessRuleTask id="Activity_0guasy1" name="Evaluate Endpoint">
      <bpmn:extensionElements>
        <zeebe:calledDecision decisionId="evaluateEndpoint" resultVariable="endPoint" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0ac0n3b</bpmn:incoming>
      <bpmn:outgoing>Flow_0t7y56o</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:serviceTask id="Activity_0772nyf" name="Problem protokollieren" zeebe:modelerTemplate="79fb2eab-2ec2-4fa3-8060-8763f85b5109">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="errorLog" />
        <zeebe:ioMapping>
          <zeebe:input source="=alteZustaendigkeit" target="responsibility" />
          <zeebe:input source="=employeeName" target="employee" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1htmiu8</bpmn:incoming>
      <bpmn:outgoing>Flow_1gdxk2c</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0735tb6" sourceRef="Activity_1t4t3mk" targetRef="Gateway_0li4qjy" />
    <bpmn:exclusiveGateway id="Gateway_0li4qjy">
      <bpmn:incoming>Flow_0735tb6</bpmn:incoming>
      <bpmn:incoming>Flow_1gdxk2c</bpmn:incoming>
      <bpmn:outgoing>Flow_0w8as0v</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0w8as0v" sourceRef="Gateway_0li4qjy" targetRef="Activity_17brtr9" />
    <bpmn:sequenceFlow id="Flow_1gdxk2c" sourceRef="Activity_0772nyf" targetRef="Gateway_0li4qjy" />
    <bpmn:sequenceFlow id="Flow_0t7y56o" sourceRef="Activity_0guasy1" targetRef="Activity_1t4t3mk" />
    <bpmn:dataObjectReference id="DataObjectReference_1661hqr" name="JSON" dataObjectRef="DataObject_0og7fjj" />
    <bpmn:dataObject id="DataObject_0og7fjj" />
    <bpmn:serviceTask id="Activity_1t4t3mk" name="Transformiere CSV-2_JSON">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="csv2Json" />
        <zeebe:ioMapping>
          <zeebe:input source="=csvFileName" target="csvInputFileName" />
          <zeebe:output source="=jsonOutputFileName" target="ausgabeDatei" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0t7y56o</bpmn:incoming>
      <bpmn:outgoing>Flow_0735tb6</bpmn:outgoing>
      <bpmn:property id="Property_02z8pqw" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_08hhgj1">
        <bpmn:sourceRef>DataObjectReference_0bivd1e</bpmn:sourceRef>
        <bpmn:targetRef>Property_02z8pqw</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_0s3qx27">
        <bpmn:targetRef>DataObjectReference_1661hqr</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0yzgf2h" sourceRef="Activity_17brtr9" targetRef="Activity_1qpiz4g" />
    <bpmn:serviceTask id="Activity_17brtr9" name="Load Json from File">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="loadJson" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0w8as0v</bpmn:incoming>
      <bpmn:outgoing>Flow_0yzgf2h</bpmn:outgoing>
    </bpmn:serviceTask>
  </bpmn:process>
  <bpmn:error id="Error_10we5t0" name="INVALID_DATA" errorCode="INVALID_DATA" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="fips1-2-fips2">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="122" y="209" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataObjectReference_0bivd1e_di" bpmnElement="DataObjectReference_0bivd1e">
        <dc:Bounds x="432" y="75" width="36" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="438" y="51" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0ya2qbz_di" bpmnElement="Event_0ya2qbz">
        <dc:Bounds x="1142" y="209" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1g7o2ol_di" bpmnElement="Activity_1qpiz4g">
        <dc:Bounds x="910" y="187" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1qcyuxw_di" bpmnElement="fipsProblemBeheben">
        <dc:Bounds x="920" y="360" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0k44gdq_di" bpmnElement="Activity_0guasy1">
        <dc:Bounds x="230" y="187" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0vtstjz_di" bpmnElement="Activity_0772nyf">
        <dc:Bounds x="590" y="450" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0li4qjy_di" bpmnElement="Gateway_0li4qjy" isMarkerVisible="true">
        <dc:Bounds x="615" y="202" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataObjectReference_1661hqr_di" bpmnElement="DataObjectReference_1661hqr">
        <dc:Bounds x="452" y="325" width="36" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="455" y="382" width="30" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1cenxsl_di" bpmnElement="Activity_1t4t3mk">
        <dc:Bounds x="420" y="187" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1njr14q_di" bpmnElement="Activity_17brtr9">
        <dc:Bounds x="730" y="187" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1rsytlx_di" bpmnElement="Event_1nt6eyv">
        <dc:Bounds x="952" y="249" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="935" y="292" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0ac0n3b_di" bpmnElement="Flow_0ac0n3b">
        <di:waypoint x="158" y="227" />
        <di:waypoint x="230" y="227" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_059pmfr_di" bpmnElement="Flow_059pmfr">
        <di:waypoint x="1010" y="227" />
        <di:waypoint x="1142" y="227" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_1iytkrd_di" bpmnElement="DataInputAssociation_1iytkrd">
        <di:waypoint x="488" y="345" />
        <di:waypoint x="910" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1g7fn8d_di" bpmnElement="Flow_1g7fn8d">
        <di:waypoint x="970" y="285" />
        <di:waypoint x="970" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_18igujp_di" bpmnElement="DataInputAssociation_18igujp">
        <di:waypoint x="488" y="352" />
        <di:waypoint x="920" y="395" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0qobqu9_di" bpmnElement="DataOutputAssociation_0qobqu9">
        <di:waypoint x="920" y="402" />
        <di:waypoint x="488" y="356" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1htmiu8_di" bpmnElement="Flow_1htmiu8">
        <di:waypoint x="970" y="440" />
        <di:waypoint x="970" y="490" />
        <di:waypoint x="690" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0735tb6_di" bpmnElement="Flow_0735tb6">
        <di:waypoint x="520" y="227" />
        <di:waypoint x="615" y="227" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0w8as0v_di" bpmnElement="Flow_0w8as0v">
        <di:waypoint x="665" y="227" />
        <di:waypoint x="730" y="227" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gdxk2c_di" bpmnElement="Flow_1gdxk2c">
        <di:waypoint x="640" y="450" />
        <di:waypoint x="640" y="252" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0t7y56o_di" bpmnElement="Flow_0t7y56o">
        <di:waypoint x="330" y="227" />
        <di:waypoint x="420" y="227" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_08hhgj1_di" bpmnElement="DataInputAssociation_08hhgj1">
        <di:waypoint x="450" y="125" />
        <di:waypoint x="450" y="187" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_0s3qx27_di" bpmnElement="DataOutputAssociation_0s3qx27">
        <di:waypoint x="471" y="267" />
        <di:waypoint x="472" y="325" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0yzgf2h_di" bpmnElement="Flow_0yzgf2h">
        <di:waypoint x="830" y="227" />
        <di:waypoint x="910" y="227" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
